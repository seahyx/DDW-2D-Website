const countries=["Algeria","Egypt","Morocco","Namibia","Nigeria","SouthAfrica"];for(country of(selectedCountry="Select Country",updateDropdownSelected=function(t){if(null==t)selectedCountry="Select Country";else{"South Africa"==t&&(t="SouthAfrica"),selectedCountry=t;for(var a=0;a<parameters.length;a++){let t=data[selectedCountry];thisParam=parameters[a];let e=parseFloat(t[thisParam.mean]),n=thisParam.inverseFunction(e);thisParam.value=n,$("#range-"+a).val(thisParam.value),$("#value-"+a).html(`${thisParam.displayFunction(thisParam.value)} ${thisParam.unit}`)}}$("#dropdownButton").html(`${selectedCountry}  `),updateChart()},countries))countryRef="#dropdown"+country,$(countryRef).on("click",(function(){updateDropdownSelected($(this).html())}));logValueFunction=function(t){return Math.round(Math.round(Math.pow(10,t)/Math.max(1,Math.pow(10,Math.ceil(t-2))))*Math.max(1,Math.pow(10,Math.ceil(t-2))))},parameters=[{name:"CPI",data:"B_1 (CPI)",mean:"(mean) CPI",stddev:"(std deviation) CPI",min:0,max:100,value:25,step:1,valueFunction:t=>Math.round(t),displayFunction:t=>Math.round(t),inverseFunction:t=>Math.round(t),unit:"CPI"},{name:"GDP",data:"B_2 (GDP per capita (US$))",mean:"(mean) GDP per capita (US$)",stddev:"(std deviation) GDP per capita (US$)",min:3,max:3.875,value:3,step:.01,valueFunction:t=>logValueFunction(t),displayFunction:t=>logValueFunction(t),inverseFunction:t=>Math.log10(t),unit:"USD"},{name:"Food Balance",data:"B_3 (Food imports per capita (kg))",mean:"(mean) Food imports per capita (kg)",stddev:"(std deviation) Food imports per capita (kg)",min:1,max:2.3,value:1,step:.01,valueFunction:t=>logValueFunction(t),displayFunction:t=>logValueFunction(t),inverseFunction:t=>Math.log10(t),unit:"kg"}];const ctx=document.getElementById("myChart");function updateChart(){for(var t=0;t<countries.length;t++){let e=data[countries[t]];countriesUndernourishment[t]=parseFloat(e.B_0);for(var a=0;a<parameters.length;a++){let n=parameters[a],i=parseFloat(e[n.mean]),r=parseFloat(e[n.stddev]),o=(n.valueFunction(n.value)-i)/r;countriesUndernourishment[t]+=parseFloat(e[n.data])*o}countriesUndernourishment[t]=Math.min(100,Math.max(0,countriesUndernourishment[t]))}chart.update()}countriesUndernourishment=[0,0,0,0,0,0],chart=new Chart(ctx,{type:"bar",responsive:!0,data:{labels:countries,datasets:[{label:"Prevalence of Undernourishment (%)",data:countriesUndernourishment,borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,max:30}}}});for(var i=0;i<parameters.length;i++)thisParam=parameters[i],textMin=$("#min-"+i),textMax=$("#max-"+i),textValue=$("#value-"+i),textMin.html(`${thisParam.displayFunction(thisParam.min)} ${thisParam.unit}`),textMax.html(`${thisParam.displayFunction(thisParam.max)} ${thisParam.unit}`),textValue.html(`${thisParam.displayFunction(thisParam.value)} ${thisParam.unit}`),slider=$("#range-"+i),thisSlider=slider[0],thisSlider.min=thisParam.min,thisSlider.max=thisParam.max,thisSlider.value=thisParam.value,thisSlider.step=thisParam.step,slider.on("change",(function(){updateChart()})),slider.on("input",(function(){let t=parseInt(this.id.split("-")[1]),a=parameters[t],e=$("#value-"+t);a.value=this.value,e.html(`${a.displayFunction(a.value)} ${a.unit}`),updateDropdownSelected()}));updateChart();